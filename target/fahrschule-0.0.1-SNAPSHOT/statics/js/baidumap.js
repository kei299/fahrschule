function createbaidumap(baidumapid,baidumap_x,baidumap_y,moveposition,schoolname,schoolinfo,schoolid,city){var map=new BMap.Map(baidumapid);var opts={type:BMAP_NAVIGATION_CONTROL_ZOOM};var opts={anchor:BMAP_ANCHOR_BOTTOM_RIGHT};var opts={offset:new BMap.Size(10,5)};map.addControl(new BMap.ScaleControl(opts));map.addControl(new BMap.NavigationControl(opts));map.enableScrollWheelZoom();map.enableKeyboard();map.enableContinuousZoom();map.enableInertialDragging();var point=new BMap.Point(baidumap_x,baidumap_y);if(baidumap_x==0&&baidumap_y==0){if(moveposition){map.centerAndZoom(city);map.addEventListener("click",function(e){if(true){$.ajax({type:"POST",url:"action.asp",data:"action=ajax_baidumap&doid="+schoolid+"&x="+e.point.lng+"&y="+e.point.lat,success:function(msg){if(document.getElementById("infos")){showinfos()}point=new BMap.Point(e.point.lng,e.point.lat);var marker=new BMap.Marker(point);map.clearOverlays();map.addOverlay(marker);map.centerAndZoom(point,15);marker.enableDragging();marker.addEventListener("dragend",function(e){if(true){$.ajax({type:"POST",url:"action.asp",data:"action=ajax_baidumap&doid="+schoolid+"&x="+e.point.lng+"&y="+e.point.lat,success:function(msg){if(document.getElementById("infos")){showinfos()}}})}})}})}})}else{map.centerAndZoom(city)}}else{map.centerAndZoom(point,15);var marker=new BMap.Marker(point);map.addOverlay(marker);if(moveposition){marker.enableDragging();marker.addEventListener("dragend",function(e){if(true){$.ajax({type:"POST",url:"action.asp",data:"action=ajax_baidumap&doid="+schoolid+"&x="+e.point.lng+"&y="+e.point.lat,success:function(msg){if(document.getElementById("infos")){showinfos()}}})}})}}}
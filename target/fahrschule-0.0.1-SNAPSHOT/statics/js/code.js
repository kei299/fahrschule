function alertValicode(){if($("#alert_box").length==0){var random=Math.random();var alertMeaasge='<div id="alert_bg" style="width: 100%; '+'position: fixed; top: 0px; left: 0px; z-index: 1000; opacity: 0.7; height: 100%; background: rgb(148, 148, 148);"></div>'+'<div id="alert_box" style="margin-top: -135px;"><div id="show_mes">输入图片验证码<div id="yzm_tangkuang_li" '+'style="display: block;"><span id="freshyzm" class="freshyzm">点击验证码可刷新验证码</span>'+'<img src="http://img.58cdn.com.cn/m58/m3/img/exit_yzm.jpg" class="exit_yzm">'+'<input id="tkyzm_text" type="text" class="tkyzm_text" maxlength="5" placeholder="请输入图片验证码">'+'<img id="yzm_img" src="/mobileauth/validatecode?'+random+'" onclick="this.src=\'/mobileauth/validatecode?r=\'+Math.random()" class="yzm_img">'+'</div></div><div id="but_div"><div id="but02" style="width: 100%;">验证并获取</div></div></div>';$("body").append(alertMeaasge)}}function getCode(tel,valcode,type){var flag=true;$.ajax({type:"get",async:false,url:"/mobileauth/getcode?mobile="+tel+"&validatecode="+valcode+"&type="+type,success:function(response){var res=JSON.parse(response);if(res.code!="0"){if(res.code==125){alert("验证码输入有误！")}else if(res.code==128){alertValicode()}else{alert(res.msg);$("#alert_bg").remove();$("#alert_box").remove()}flag=false}else{$("#alert_bg").remove();$("#alert_box").remove();flag=true}}});return flag}function showTip(content){$(".mask span").addClass("slideInDown").one("webkitAnimationEnd",function(){$(this).removeClass("slideInDown")});$(".mask span").text(content);timer()}function timer(){var time=0;var timerid;clearTimeout(timerid);timerid=setInterval(function(){time++;if(time==1){$(".mask span").css("opacity",0);return false}},1e3)}$(function(){$(document).on("click",".exit_yzm",function(){$("#alert_bg").remove();$("#alert_box").remove()})});